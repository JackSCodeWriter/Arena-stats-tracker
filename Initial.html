<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>League Arena Leaderboard</title>
  <style>
    body { font-family: Arial; background: #0f1923; color: #fff; padding: 20px; }
    h1 { color: #e0b42f; }
    .card {
      background: #1c2733;
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      display: flex;
      align-items: center;
    }
    .champion-icon {
      width: 60px;
      height: 60px;
      margin-right: 15px;
      border-radius: 5px;
    }
    .duo-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-left: 10px;
      border: 2px solid #ccc;
    }
    .info { flex-grow: 1; }
    .player-name { font-size: 1.5em; color: #ffd700; }
    .stat { margin: 4px 0; }
  </style>
</head>
<body>
  <h1>Arena Leaderboard (Ranked by Win Rate)</h1>
  <div id="leaderboard"></div>

  const version = "14.13.1"; // Riot patch version
  const sheetUrl = "https://opensheet.elk.sh/1ZFYi3A64qEakS77vDrYDDOTTsOUkR0YSDhliqQoRTKI/Dashboard";

  fetch(sheetUrl)
    .then(res => {
      if (!res.ok) throw new Error("Network response not ok");
      return res.json();
    })
    .then(data => {
      console.log(data); // Debug the data here
      data.sort((a, b) =>
        parseFloat(b["Win Rate"]) - parseFloat(a["Win Rate"])
      );

      data.forEach(player => {
        const champName = player["Most Played Champion"].split(" ")[0];
        const duoName = player["Most Played Duo"].split(" ")[0];
        const champImg = `https://ddragon.leagueoflegends.com/cdn/${version}/img/champion/${champName}.png`;
        const duoIcon = `https://raw.communitydragon.org/latest/plugins/rcp-be-lol-game-data/global/default/v1/profile-icons/29.png`;

        document.getElementById("leaderboard").innerHTML += `
          <div class="card">
            <img class="champion-icon" src="${champImg}" alt="${champName}" />
            <div class="info">
              <div class="player-name">${player["Player"]}</div>
              <div class="stat">üèÜ Win Rate: ${player["Win Rate"]}</div>
              <div class="stat">‚öîÔ∏è KDA Ratio: ${player["KDA Ratio"]}</div>
              <div class="stat">üí• Avg Damage: ${player["Avg Damage"]}</div>
              <div class="stat">üõ°Ô∏è Most Played Champion: ${player["Most Played Champion"]}</div>
              <div class="stat">ü§ù Most Played Duo: ${player["Most Played Duo"]} <img class="duo-icon" src="${duoIcon}" /></div>
              <div class="stat">ü•á 1st Place Finishes: ${player["1st"]}</div>
            </div>
          </div>
        `;
      });
    })
    .catch(err => {
      console.error("Fetch error:", err);
      document.getElementById("leaderboard").innerText = "Failed to load leaderboard data.";
    });
</script>
</body>
</html>
